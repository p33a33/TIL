# Today I leanred(21.01.05)
<br>

## 의식적인 TDD, Refactoring 연습하기(박재성님)

[관련 영상 : 우아한 테크세미나](https://youtu.be/bIeqAlmNRrA)<br>

1. 단위테스트 연습으로 시작하자
* 언어에 내장된 API를 테스트하는 테스트 코드 작성해보는 연습을 해보자.
* API에 대한 이해가 높아진다.
* 명확한 I/O으로 테스트 코드를 작성하기에 매우 적절한 예제임.
* ex) Array메소드들을 테스트코드로 작성 해보기.
* 단위 테스트 방법을 배울 수 있다.
* 단위테스트 도구 사용법을 배울 수 있다.

<br>

2. 알고리즘을 학습한다면 알고리즘 구현에 대한 단위 테스트를 진행해도 좋다.
* 정렬 알고리즘이 잘 작동하는지 테스트하는 테스트 코드를 작성해보자.
* 알고리즘 또한 I/O가 명확하기때문에 테스트코드 작성 연습에 도움이 된다.

<br>

3. TDD연습은 어떻게 시작할까?
* 어려운 문제 해결이 목적이 아니라, TDD를 연습하는데 목적을 둔다.
* 난이도가 낮거나, 자신에게 익숙한 문제로 시작하라.
* 웹, 모바일 UI나 DB에 의존관계를 가지지 않는 요구사항으로 연습하자. 다만 적절한 도구를 사용하면 테스트를 만들수도 있지만, TDD를 연습하는데에 적절하지 않다.
* UI같은 경우 selinum같은 도구를 사용해서 테스트할 수 도 있다.

<br>


4. TDD 연습문제 예제
* 쉼표(,) 또는 콜론(:)을 구분자로 가지는 문자열을 전달 하는 경우, 구분자를 기준으로 분리한 숫자의 합을 반환.
* 로또번호
* 사다리타기
* 볼링 게임 점수판
* 체스 게임
* 지뢰 찾기(위 모든 예제의 UI는 콘솔)

<br>

5. TDD circle of life
* Test failed => Test Passed => Refactor
* 실패하는 테스트를 만들고, 테스트를 통과하게 만들고, 리팩토링을 진행한다.

<br>

6. 리팩토링 연습 - 메소드 분리
* 테스트 코드를 바꾸는게 아니라, 테스트 대상 코드를 개선하는데 집중해야한다.
* 본인이 리팩토링의 기준을 세우고, 자기 코드에 피드백을 줄 수 있어야한다.
* 리팩토링의 기준은 정량적이고 측정가능한 방법으로 연습한다.
* 예를들어, 인덴트(들여쓰기)를 두 단계 이상 넘어가지 않겠다.
* else를 쓰지 않는다. (앞의 if문에서 return을 처리해버릴 수 있으니까)
* 함수가 한가지 일만 하도록 구성한다.
* 로컬변수가 진짜 필요한건지 생각한다.
* composed method 패턴을 적용한다 -> 역할이 명확한 동등한 함수들로 구성한다. 
* 한번에 모든 원칙을 지키려하지말라. 한번에 한 가지 명확하고 구체적인 목표를 가지고 연습하자.
* 극단적인 방법으로 연습하는 것도 좋다. ex) 하나의 메소드를 10줄 이내로만 작성하도록 제한.

<br>

7. 웹 UI, 모바일 UI, DB와 같은 의존관계 추가
* 이때 필요한 역량, 테스트하기 쉬운 코드와 테스트하기 어려운 코드를 보는 눈과 테스트하기 어려운 코드를 테스트하기 쉬운 코드로 설계하는 감(sense)

<br>

8. 우리가 TDD, Refactoring 적용이 실패하는 이유
* _"연습이 충분치 않은 상태에서 레거시 코드에 테스트 코드를 추가해 리팩토링 하기"_ 와 같은 높은 난이도로 바로 도전하기 때문.

<br>

9. 책 `The ThoughtWorks Anthology`에 나오는 객체지향 생활체조 원칙(에서 내가 참고할만한 부분만)

    * 한 메서드에 오직 한 단계의 들여쓰기만 한다.
    * else를 쓰지않는다.
    * 줄여쓰지 않는다.(축약 금지)

<br>

10. 책 `Clean Code`에서 제안한 메소드 인자 개수

    * 메소드(함수)에서 이상적인 인자 개수는 0개(무항), 다음은 1개, 그 다음은 2개.
    * 3개는 가능한 피해라.
    * 4개 이상은 특별한 이유가 있어도 쓰지 마라.

<br>

11. TDD, Refactoring에 필요한 것.
* 조급함 대신 마음의 여유를 가져라.
* 나만의 Toy project를 진행해라.
* 같은 과제를 반복적으로 구현할 수 있는 인내력, 꾸준함, 성실함이 필요하다.





